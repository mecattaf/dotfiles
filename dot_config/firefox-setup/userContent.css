/* ============================================
   CONSOLIDATED FIREFOX CONTENT CUSTOMIZATION
   Features from: Hypr, SimpleFox, ff-chrome-folder
   With minimal clock startpage integration
   ============================================ */

/* ============================================
   COLOR SCHEME VARIABLES
   ============================================ */

@media (prefers-color-scheme: dark) {
  :root {
    --content-bg-primary: #000000;
    --content-bg-secondary: #090909;
    --content-text: #ffffff;
    --content-accent: #1280fd;
  }
}

@media (prefers-color-scheme: light) {
  :root {
    --content-bg-primary: rgba(255, 255, 255, 0.8);
    --content-bg-secondary: rgba(255, 255, 255, 0.95);
    --content-text: #000000;
    --content-accent: #007aff;
  }
}

/* ============================================
   NEW TAB PAGE - MINIMAL BLACK
   ============================================ */

@-moz-document url("about:newtab"), url("about:home") {
  body {
    background: #000000 !important;
  }
  
  /* Hide all Firefox Home content */
  .prefs-button,
  .logo-and-wordmark,
  .search-wrapper,
  .section-title,
  .body-wrapper,
  .collapsible-section,
    .top-sites,
  .snippet,
  #root > div {
    display: none !important;
  }
  
  /* Ensure black background */
  #root {
    background: #000000 !important;
  }
}

/* ============================================
   BLANK PAGE STYLING
   ============================================ */

@-moz-document url("about:blank") {
  html, body {
    background: #000000 !important;
  }
}

/* ============================================
   PDF VIEWER - DARK MODE
   ============================================ */

@-moz-document url-prefix("about:reader"), regexp("^.*\\.pdf$") {
  #viewerContainer > #viewer > .page > .canvasWrapper > canvas {
    filter: grayscale(100%) invert(100%);
  }

  /* High Contrast Highlights */
  .pdfViewer .textLayer .highlight {
    background-color: #00ff00 !important;
  }

  .pdfViewer .textLayer .highlight.selected {
    background-color: #ff0000 !important;
  }

  .pdfViewer .textLayer ::selection {
    background-color: #ff00ff !important;
    color: revert !important;
  }
}

/* ============================================
   ABOUT PAGES - DARK THEME
   ============================================ */

@-moz-document url-prefix("about:") {
  :root {
    --in-content-page-background: var(--content-bg-primary) !important;
    --in-content-page-color: var(--content-text) !important;
    --in-content-box-background: var(--content-bg-secondary) !important;
    --in-content-border-color: rgba(255, 255, 255, 0.1) !important;
    --in-content-link-color: var(--content-accent) !important;
  }
}

/* ============================================
   PRIVATE BROWSING - MINIMAL
   ============================================ */

@-moz-document url("about:privatebrowsing") {
  body {
    background: #000000 !important;
  }

  /* Hide promotional content */
  .info,
  .promo-visible,
  .promo,
  .logo-and-wordmark {
    display: none !important;
  }

  /* Style search if visible */
  .search-handoff-button {
    background-color: rgba(255, 255, 255, 0.05) !important;
    border-radius: 8px !important;
    box-shadow: none !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
  }
  
  .fake-textbox {
    color: rgba(255, 255, 255, 0.5) !important;
  }
}

/* ============================================
   READER MODE
   ============================================ */

@-moz-document url-prefix("about:reader") {
  body {
    background: var(--content-bg-primary) !important;
  }
  
  .container {
    background: var(--content-bg-secondary) !important;
    color: var(--content-text) !important;
  }
}

/* ============================================
   DEVTOOLS - MATCH THEME
   ============================================ */

@-moz-document url-prefix("chrome://devtools") {
  :root {
    --theme-body-background: #000000 !important;
    --theme-sidebar-background: #090909 !important;
    --theme-toolbar-background: #090909 !important;
  }
}

/* ============================================
   ERROR PAGES - DARK THEME
   ============================================ */

@-moz-document url-prefix("about:neterror"), 
               url-prefix("about:certerror"),
               url-prefix("about:blocked") {
  body {
    background: #000000 !important;
    color: #ffffff !important;
  }
  
  .title {
    color: #ffffff !important;
  }
  
  #errorShortDesc,
  #errorLongDesc {
    color: rgba(255, 255, 255, 0.8) !important;
  }
  
  button {
    background: rgba(255, 255, 255, 0.1) !important;
    color: #ffffff !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
  }
}
